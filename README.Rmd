---
output: github_document
---

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# Sweet R tricks
Tips and tricks in R & RStudio. Gathered from wherever I see them. Mainly a repo for me to remember cool little R tips I've seen around the place. I hope to update it regularly -- feel free to fork, add your own, and send a PR.

# I/O

### Making Saved Data Smaller
Adding `compress = "xz"` to your `save()` function can make things much smaller:  

```{r}
library(congressbr)
data('senate_nominal_votes')
head(senate_nominal_votes)
save(list = ls(), file = "sen.Rda")
save(list = ls(), file = "sen2.Rda", compress = "xz")

file.info("sen.Rda")$size
file.info("sen2.Rda")$size
```

[Source](https://twitter.com/ikashnitsky/status/973325892956184576)

## Tables

### Totals columns
[source](https://twitter.com/andrewheiss/status/973325552596664321?s=03)

```{r}
library(dplyr)
library(stringr)
library(pander)
mtcars %>% 
  mutate(cars = row.names(.),
         cars = str_extract(cars, "[A-Za-z\\b]*")) %>% 
  count(cars, am) %>% 
  bind_rows(summarise_at(., vars(n), funs(sum)) %>%
              mutate(cars = "**Total**")
  ) %>% 
  pandoc.table()
```

Also, from the comments to the above tweet (I prefer this actually): 
```{r}
library(dplyr)
library(janitor)
mtcars %>% 
  mutate(cars = row.names(.),
         cars = str_extract(cars, "[A-Za-z\\b]*")) %>% 
  count(cars, am) %>% 
  adorn_totals()
```

## RStudio tricks

`ts` plus Shift and Tab gives you a nice data-stamped code section:
```{r}
# Sun Mar 25 14:36:54 2018 ------------------------------
```

[Source](https://community.rstudio.com/t/rstudio-hidden-gems/4974)

